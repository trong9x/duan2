<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport"
content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Nh·∫≠p s·∫£n l∆∞·ª£ng</title>

<style>
*{box-sizing:border-box}
body{margin:0;font-family:Arial;background:#f2f2f2}

/* HEADER */
.header{
  position:fixed;top:0;left:0;right:0;height:56px;
  background:#27ae60;color:#fff;
  display:flex;align-items:center;justify-content:center;
  font-size:18px;font-weight:bold;z-index:10;
}

/* CONTENT */
.content{padding:70px 12px 90px}
.card{
  background:#fff;border-radius:18px;padding:16px;
  max-width:520px;margin:auto;
  box-shadow:0 6px 18px rgba(0,0,0,.15);
}

label{font-weight:600;margin-top:12px;display:block;font-size:14px}
select,input{
  width:100%;padding:14px;margin-top:6px;
  border-radius:14px;border:1px solid #ccc;font-size:16px
}

/* FOOTER */
.footer{
  position:fixed;bottom:0;left:0;right:0;
  background:#fff;padding:10px;
  box-shadow:0 -4px 12px rgba(0,0,0,.15);
}
button{
  width:100%;padding:16px;font-size:18px;
  background:#27ae60;color:#fff;border:none;border-radius:18px
}
button:active{opacity:.85}
</style>
</head>

<body>

<div class="header">üì± Nh·∫≠p s·∫£n l∆∞·ª£ng</div>

<div class="content">
<div class="card">

<label>Ng√†y</label>
<input id="date" type="date">

<label>M√°y</label>
<select id="machine">
  <option value="">-- ch·ªçn m√°y --</option>
  <option>1101D</option><option>1102D</option><option>1103F</option>
  <option>1104F</option><option>1107B</option><option>1108B</option>
</select>

<label>Tr·ª•c</label>
<select id="axle">
  <option value="">-- ch·ªçn tr·ª•c --</option>
  <option>L1</option><option>L2</option><option>L3</option>
</select>

<label>Nguy√™n li·ªáu</label>
<input id="material" placeholder="150/96 bghbs">

<label>S·ªë l∆∞·ª£ng</label>
<input id="quantity" type="number" inputmode="numeric">

<label>V·ªã tr√≠</label>
<input id="position" placeholder="A-25">

<label>Ca</label>
<select id="shift">
  <option value="a">Ca A</option>
  <option value="b">Ca B</option>
</select>

<label>Ng∆∞·ªùi ph·ª• tr√°ch</label>
<input id="person">

</div>
</div>

<div class="footer">
  <button onclick="save()">‚úÖ OK</button>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
firebase.initializeApp({
  apiKey:"AIzaSyAJ9dZW5b8WxF22cocPIB9bdsAGBHW-k",
  databaseURL:"https://quan-ly-may-det-default-rtdb.asia-southeast1.firebasedatabase.app"
});
const db=firebase.database();

/* ===== set ng√†y h√¥m nay ===== */
date.value=new Date().toISOString().slice(0,10);

/* ===== AUTO FOCUS ===== */
const order=["date","machine","axle","material","quantity","position","shift","person"];
order.forEach((id,i)=>{
  const el=document.getElementById(id);
  if(!el) return;
  el.addEventListener("change",()=>focusNext(i));
  el.addEventListener("keyup",e=>{
    if(e.key==="Enter") focusNext(i);
  });
});
function focusNext(i){
  const next=document.getElementById(order[i+1]);
  if(next) next.focus();
}

/* ===== SAVE ===== */
function save(){
  const data={
    date:date.value,
    machine:machine.value,
    axle:axle.value,
    material:material.value.trim(),
    quantity:Number(quantity.value),
    position:position.value.trim(),
    shift:shift.value,
    person:person.value.trim(),
    createdAt:Date.now()
  };

  if(!data.date||!data.machine||!data.axle||!data.material||
     !data.quantity||!data.shift||!data.person){
    alert("‚ùó Nh·∫≠p ƒë·ªß th√¥ng tin");
    return;
  }

  db.ref(`production/${data.machine}/axle_${data.axle}`).push(data)
    .then(()=>location.href="my-skill-mobile.html#sanluong");
}
</script>

</body>
</html>

<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Scan QR</title>

<style>
body{
  margin:0;
  font-family:Arial;
  background:#f2f2f2;
  text-align:center;
}
#preview{
  width:100%;
  min-height:300px;
  background:#000;
}
button{
  margin:16px;
  padding:14px 20px;
  font-size:16px;
  border:none;
  border-radius:12px;
  background:#27ae60;
  color:#fff;
}
</style>
</head>

<body>

<h2>ğŸ“· QuÃ©t QR</h2>
<button onclick="startScan()">Báº®T Äáº¦U QUÃ‰T</button>
<button onclick="stopScan()">Dá»ªNG</button>

<div id="preview"></div>

<script src="https://unpkg.com/html5-qrcode"></script>

<script>
let scanner = null;

function startScan(){
  if(scanner){
    stopScan();
  }

  scanner = new Html5Qrcode("preview");

  scanner.start(
    { facingMode: "environment" }, // âœ… DUY NHáº¤T CÃCH ÄÃšNG CHO iOS
    {
      fps: 10,
      qrbox: 250
    },
    (text) => {
      alert("âœ… ÄÃƒ QUÃ‰T: " + text);
      stopScan(); // ğŸ‘ˆ Báº®T BUá»˜C (iOS ráº¥t ká»µ)
    },
    () => {}
  ).catch(err=>{
    alert("âŒ KhÃ´ng má»Ÿ Ä‘Æ°á»£c camera: " + err);
  });
}

function stopScan(){
  if(scanner){
    scanner.stop()
      .then(()=>scanner.clear())
      .catch(()=>{});
    scanner = null;
  }
}
</script>

</body>
</html>

